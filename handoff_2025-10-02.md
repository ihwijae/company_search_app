2025-10-02 09:30

## 진행 현황 요약
- 후보 산출 모달이 설정값 기반으로 즉시 검색을 수행하도록 개선했습니다. 후보 검색 버튼을 다시 눌러야 하는 불필요한 단계가 제거됐습니다.
- 신용평가 데이터 처리 로직을 보강해 만료일을 날짜 파싱으로 판정하고, 유효기간 만료·자료 없음·인정기간 초과 시 점수를 숨기고 안내 라벨만 노출하도록 정리했습니다.
- BBB0, BB0 등 숫자 0이 포함된 등급 문자열도 정상적으로 감지 및 표시되며, 0점 이하인 경우 “[신용평가 자료 없음]”으로 분류됩니다.
- 상태 뱃지 스타일을 업체 조회 화면과 통일하여 UI의 일관성을 확보했습니다.

## 미해결/향후 작업
1. **자동협정 기능 구현**
   - 후보 산출 결과를 기반으로 자동 협정 추천/생성 로직을 마저 구현해야 합니다.
   - 현재 단계에서 후보 데이터 구조와 신용/점수 판정은 정리되어 있으므로, 협정 규칙을 연결해 자동 조합을 도출하는 로직을 설계/구현하는 게 다음 과제입니다.

2. **후보 산출 입력값 상태 유지**
   - 행안부 30억미만 등 특정 화면에서 입력한 공고 정보를 다른 화면(업체 조회 등)으로 이동했다가 돌아와도 그대로 복원되도록 상태 저장/복원 로직이 필요합니다.
   - 입력 변경 시 공용 저장소(예: context/localStorage 등)에 즉시 반영하고, 모달/화면 진입 시 해당 값을 초기값으로 불러오도록 설계해야 합니다.

3. **업체 조회 화면 상태 유지**
   - 업체 조회 화면 또한 다른 화면으로 이동 후 돌아와도 직전 조회 결과/스크롤/선택 상태를 유지하도록 기억해야 합니다.

4. **신용 데이터 추가 검증**
   - 만료일 파싱은 정규표현식을 통해 처리 중이나, 알 수 없는 날짜 포맷이 추가될 경우 대비한 예외 처리/로깅이 필요할 수 있습니다.

## 개발 메모 / 주의사항
- 만료 판정은 `main.js`에서 수행해 후보 목록 자체가 `[신용평가 유효기간 만료]` 상태로 내려오며, 프런트에서는 이 값을 그대로 표시합니다. 다른 모듈에서 신용점수를 재활용할 땐 `creditNote` 및 `creditNoteText` 필드를 함께 참고하세요.
- 후보 산출 모달은 열릴 때 `buildInitialParams` 기준으로 즉시 `runFetch`가 호출됩니다. 새로운 필터를 추가하면 `buildInitialParams`에도 반영해야 자동 재조회가 정상 동작합니다.
- 신용 점수 표시 로직은 `[신용평가 …]` 라벨을 우선 출력하고, 조건을 모두 통과했을 때만 “신용 AA- → 15점 / 15점” 식으로 나타냅니다.

## 차기 작업을 위한 인계 프롬프트
```
1. 자동협정 기능을 구현하기 위해 후보 산출 데이터 구조(신용/부채/유동/관리총점 필드)를 점검한다.
2. 협정 규칙(항상 포함/제외, 단독 가능 여부 등)과 후보 데이터를 연결해 자동 조합 알고리즘의 입력 모델을 설계한다.
3. 후보 목록에서 자동협정 후보군을 생성·필터링하고, UI에 반영하는 절차를 구현한다.
4. 후보 산출/업체 조회 화면 입력값을 저장·복원하는 공용 상태 관리 로직을 도입한다.
   - 입력 변경 시 저장, 화면 진입 시 복원, 필요 시 `localStorage`나 app-level store 사용.
5. 필요한 경우 신용 만료/자료 없음 상태를 협정 로직에서도 동일하게 처리하도록 검증한다.
```

## 참고 파일
- `main.js` (신용 만료 판정 + 후보 산출 로직)
- `src/view/features/agreements/components/CandidatesModal.jsx` (후보 모달 UI 및 신용 라벨 노출)
- `src/view/features/search/pages/SearchPage.jsx` (업체 조회 UI, 상태 뱃지/정렬 로직)
