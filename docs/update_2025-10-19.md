# 품질평가 필터 개선 및 지역사 찾기 창 상태 유지 작업 (2025-10-19)

## 1. LH 품질 필터 보완
- 수정 파일: `searchLogic.js`
- 변경 사항: `hasQualityEvaluation()`에서 `normalized.includes('없음')` 조건을 추가하여 `없음(25.05.01)`형 문자열도 필터에서 제외되도록 처리.

## 2. 지역사 찾기 창 전역화 및 상태 유지
- 수정 파일: `src/view/features/agreements/context/AgreementBoardContext.jsx`
  - 지역사 찾기 창 상태(`candidatesWindow`)를 컨텍스트가 관리하도록 확장.
  - `openCandidatesModal` 호출 시 공고 정보, 팀 구성, 후보/고정/제외 목록을 모두 상태에 저장.
  - `applyCandidatesSelection`으로 적용 결과가 컨텍스트에 즉시 반영되어 페이지 이동 시에도 유지.
  - `CandidatesModal`을 컨텍스트 레벨에서 렌더링하도록 변경.
- 수정 파일: `src/view/features/agreements/pages/AgreementFlowPage.jsx`
  - 페이지 로컬 상태와 컨텍스트 상태를 동기화하도록 훅 정리.
  - `openCandidatesModal` 호출 시 기존 후보/고정/제외 목록을 `initialCandidates` 등으로 전달하고, 참가자격금액 입력이 비어 있으면 공백으로 유지.

## 3. 지역사 찾기 창에서 기존 선택 목록 복원 및 표시 강화
- 수정 파일: `src/view/features/agreements/components/CandidatesModal.jsx`
  - 새 props(`initialCandidates`, `initialPinned`, `initialExcluded`)를 받아 창이 열릴 때 기존 선택을 그대로 보여줌.
  - 초기 목록이 있으면 자동 검색을 건너뛰고 UI가 비지 않도록 처리.
  - 정렬 버튼을 지분/5년실적/시평액 기준으로 확장하고 각각의 고/저순 정렬을 지원.
  - 후보 검색용 텍스트 필터를 추가해 업체명·대표자를 바로 검색 가능.
  - 여성기업은 `女` 배지, 품질평가가 있는 업체는 `품질평가 [점수]` 배지를 노출.
- 수정 파일: `agreements-settings.json`
  - 기본 alwaysInclude 리스트에서 우진일렉트, 아람이엔테크, 지음이엔아이를 제거해 기본 뱃지가 나타나지 않도록 정리.
- 수정 파일: `src/view/features/agreements/components/AgreementBoardWindow.jsx`
  - 사이드바 섹션명을 “대표사 후보”에서 “대기 업체”로 변경하고 빈 리스트 안내 문구를 조정.
  - 대표사/지역사 카드와 사이드바 목록에 여성기업·품질평가 배지를 추가해 지표를 바로 확인.
  - 지분 합계가 100%가 아니어도 지분(%/100) 기준으로 경영·실적 점수를 산출하도록 변경하고, 합계 배지를 색상으로 강조.
- 수정 파일: `src/components/CompanySearchModal.jsx`
  - 업체 조회 모달에 업종 배지, 여성기업/품질평가 배지, 담당자 이름 뱃지를 표시해 검색 결과 정보를 강화.

## 4. 검색 결과 툴바 UI 및 필터 초기화 개선
- 수정 파일: `src/styles.css`
  - 결과 툴바 버튼 글꼴 크기/패딩을 조정하고 줄바꿈을 방지해 한 줄에 표시되도록 개선.
- 수정 파일: `src/index.css`
  - 결과 툴바·페이지네이션 사이 여백을 조정하고 페이지 버튼을 주황색 계열로 강조해 다음 페이지를 쉽게 인지하도록 개선.
- 수정 파일: `src/view/features/search/pages/SearchPage.jsx`
  - 새 검색 실행 시 `최신만`, `LH품질`, `여성기업` 필터를 기본값(비활성)으로 자동 초기화.
  - 내부 검색 함수(`executeSearch`)가 필터 Override 값을 받아 즉시 반영하도록 확장.
  - `PAGE_SIZE`를 12로 조정해 페이지당 결과 수를 줄이고 스크롤 발생을 완화.

## 테스트/확인 제안
1. Agreement 화면에서 지역사 찾기 → 후보 선택 및 적용.
2. 다른 화면으로 이동했다가 다시 Agreement 화면으로 돌아온 후 지역사 찾기 창을 열어 기존 선택이 유지되는지 확인.
3. 협정보드를 열어 후보/고정/제외 상태가 일치하는지 확인.

> 자동 테스트는 수행하지 않았으므로 위 수동 확인 절차를 권장합니다.


## 차후에 이제 조달청 50억미만 협정기능 구현 예정.