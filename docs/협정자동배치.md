# 협정 자동 배치 향후 구현 메모

## 목표
- 지역사 찾기 결과를 기반으로 협정보드에 후보를 자동 배치하는 기능을 재도입할 때 참고할 요구사항 요약.

## 현재 결정 사항
1. **역할 분리**
   - 지역사 찾기는 업체 검색/정보 조회/복사에 집중한다.
   - 협정보드는 사용자가 직접 검색하거나 복사한 업체를 수동으로 배치한다.
   - 두 화면 간 실시간 상태 공유(후보 목록, 핀/제외 등)는 중단한다.

2. **자동 배치 기능 보류 이유**
   - 상태를 공유하는 구조에서 중복/동기화 버그가 반복 발생(예: 협정보드 추가 업체가 지역사 찾기에서 중복 표기).
   - 복잡한 상태 동기보다, 명확한 역할 분리가 우선이라고 판단.

## 재도입 시 검토 포인트
1. **데이터 전달 경로**
   - 지역사 찾기 → 협정보드 간 데이터를 넘기는 방법을 명시적으로 정의.
     - 예: "후보 내보내기(JSON/클립보드)" 버튼과, 협정보드 `후보 붙여넣기` 액션.
     - 또는 선택된 업체를 로컬 저장소에 기록하고, 협정보드에서 불러오는 단일 API.

2. **동기화 범위 제한**
   - 협정보드가 참조하는 데이터는 “후보 스냅샷” 정도로 제한하고, 그 이후 상태(핀/제외, 지분 입력 등)는 협정보드 내부에서만 관리한다.
   - 지역사 찾기는 검색 결과, 필터링 상태 등 자체적으로만 신경 쓰도록 한다.

3. **유효기간/검증 로직 일원화**
   - 경영점수 계산, 신용평가 만료 등 핵심 검증 로직을 공통 모듈(`utils` 등)에 두고 양쪽 화면이 동일한 함수를 사용하게 한다.
   - 자동 배치 시에도 “만료된 신용점수는 사용하지 않는다” 같은 규칙이 그대로 유지되도록 한다.

4. **사용자 흐름**
   - 지역사 찾기에서 후보를 “확정”하는 개념이 필요하다면, 명확한 버튼/상태를 제공한다.
   - 협정보드에서 자동 배치를 시작할 트리거(예: "확정 후보 불러오기")와, 배치 실패 시 수동으로 수정하는 경로를 UX로 제공한다.

## 다음 단계 제안
- 역할 분리 이후 버그 감소 여부를 모니터링.
- 자동 배치가 꼭 필요한 시점이 오면, 위의 전달 경로/검증 로직 가이드를 바탕으로 다시 설계한다.
