# 협정보드 인계 문서 (2026-01-09)

## 작업 개요
협정보드 UI/기능 개선, 저장·불러오기 기능 고도화, 스크롤/레이아웃 문제 해결, 알림 공통화, 점수/만점 로직 보완 등을 진행했습니다.

## 주요 변경사항
### 1) 저장/불러오기 기능
- 저장/불러오기 루트를 사용자가 지정 가능.
- 불러오기 모달에서 루트 폴더 선택 및 표시.
- 지정된 루트 아래 하위 폴더까지 재귀 스캔하여 협정 파일을 목록화.
- 불러오기 필터: 발주처/금액구간/공종/의무지역/추정금액(min/max).
- 리스트 카드 제목은 `공고번호-공고명` 표시, 의무지역은 뱃지로 표시.
- 공종 뱃지 색상:
  - 전기: 노란색
  - 통신: 하늘색
  - 소방: 빨간색
- 불러오기 목록에서 삭제 버튼 추가 (공통 확인 UI 사용).

### 2) 알림 UI 통일
- 공통 알림: `FeedbackProvider` 사용.
- 알림 위치는 화면 중앙.
- 협정보드/협정문자생성 등 알림은 모두 공통 UI로 통일.
- 문서: `docs/알림공통UI.md`.

### 3) 헤더/테이블 UI/스크롤
- 협정보드 가로/세로 스크롤을 테이블 영역에만 적용.
- 헤더는 고정, 테이블만 스크롤.
- 상단바(타이틀바) 두께 변형 문제 해결.
- 테이블 마지막 열이 세로 스크롤바에 덮이지 않도록 여백 처리.
- 셀 텍스트/숫자 중앙 정렬 적용.

### 4) 점수/만점 관련
- LH 품질점수 추가(품질총점 → 품질점수 표시, 예상점수에 합산).
- 만점 기준: `경영 + 실적 + 입찰 + (신인도/순공사원가가점 포함)` 합산으로 95점 이상.
- PPS(조달청) 신인도는 가점으로 합산하되, 만점 판정은 95 기준.
- 예상점수 만점 시 초록색 표시.
- 품질점수 2점 미만은 빨간색 표시.

### 5) 참여업체수 제한 & 의무지분 경고
- 참여업체수 드롭다운(2~5) 추가.
- 제한 초과 시, 초과 슬롯에 `참여업체수 초과` 문구 표시.
- 의무지분 미충족 시 지분합계 하단에 `의무지분 미충족` 표시.

### 6) PPS(조달청) 자동 계산
- 추정가격 × 1.1 → 기초금액 자동.
- 기초금액 × 사정율 × 투찰율 → 투찰금액 자동.
- 사용자 수동 입력 시 자동 덮어쓰기 방지.

### 7) 실적만점금액 표시
- 헤더에 실적만점금액 표시(투찰금액/시공비율기준금액 아래).
- 지역사찾기 화면 로직과 동일.

## 저장 포맷 (메타/페이로드)
- 저장 파일은 JSON.
- meta: 발주처/금액구간/공종/의무지역/추정금액/공고번호/공고명/개찰일 등.
- payload: 협정보드 전체 상태(업체 배치/지분/신인도/경영/설정값 등).

## 경로/폴더 정책
- 사용자 지정 루트 폴더에 저장.
- 불러오기 시 루트 폴더 기준으로 하위까지 재귀 스캔.
- 저장 시 루트 자동 변경되지 않음(사용자 변경 시에만).

## 템플릿 경로
- 행안부 30억 미만 템플릿:
  - `템플릿/행안부_30억미만.xlsx` (main.js 연결 완료)

## 관련 파일 목록
- 저장/불러오기:
  - `main.js`
  - `preload.js`
  - `src/view/features/agreements/hooks/useAgreementBoardStorage.js`
  - `src/view/features/agreements/components/AgreementLoadModal.jsx`
- 협정보드 UI/로직:
  - `src/view/features/agreements/components/AgreementBoardWindow.jsx`
  - `src/styles.css`
  - `src/index.css`
- 공통 알림:
  - `src/components/FeedbackProvider.jsx`
  - `docs/알림공통UI.md`

## 다음 작업 (요청됨)
- 조달청 50억 미만 엑셀 내보내기 기능 구현
- LH 50억 미만 엑셀 내보내기 기능 구현
