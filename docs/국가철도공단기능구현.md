# 국가철도공단 기능 구현 메모

## 완료된 작업
- 협정 문자 생성기(`src/shared/agreements/generator.js`)에 국가철도공단 전용 헤더 규칙을 추가하여 공고번호/공고명이 두 줄로 출력되고 구성사 라인에만 사업자번호가 붙도록 수정함.
- 엑셀 협정 도우미(`src/view/features/excel-helper/pages/ExcelHelperPage.jsx`)의 발주처 목록에 국가철도공단을 추가하고, 동일한 금액대(50억 미만/50~100억)를 설정하여 문자 생성에 필요한 ownerToken 을 전달하도록 구성함.
- Electron 실행 아이콘을 `build/icon/icon.ico`로 통일하고 windows 빌드 설정 및 런타임 창 옵션에서 모두 새 아이콘을 참조하도록 정리함.

## 다음 세션에서 진행할 예정인 작업
1. **경영상태점수 계산 지원**
   - 국가철도공단 선택 시 산식에 필요한 기준금액/입력값 매핑을 확정하고, `excel-helper-formulas-evaluate` 호출 전에 필요한 파라미터를 추가 구성.
   - formulas 설정 파일에 국가철도공단 전용 규칙이 필요한지 확인하고, 필요 시 `formulas.defaults`/override 구조에 항목 추가.
2. **엑셀 셀 동기화 로직**
   - 국가철도공단 템플릿에서 대표사/구성사 열 위치 확인 후 `getOffsetsForOwner` 등에 전용 오프셋이 필요하면 추가.
   - 자동 추출 루프(`generateAgreementMessages`)가 국가철도공단 양식 구조에 맞춰 회사명/지분/사업자번호를 안정적으로 읽는지 검증하고 보완.
3. **문자 생성 추가 요구사항**
   - 신규 발주처 선택 시 엑셀-문자 동기화가 아직 비활성이라 했으므로, 데이터 매핑이 완료되면 `ownerToken`이 국가철도공단일 때만 적용되는 후속 옵션/검증 로직을 정리.
4. **테스트 및 문서화**
   - 위 기능 개발 후 수동 테스트 시나리오(공고 입력 → 업체 추출 → 문자 생성)를 docs 또는 PR 설명에 기록.
   - 필요 시 `work.md`/`README` 등 안내 문서에도 국가철도공단 지원 여부와 제한 사항을 추가.

## 참고 사항
- 현재는 Excel 템플릿 동기화 기능이 국가철도공단 선택 시 비활성 상태로 가정되어 있으므로, 위 작업 순서는 "문자 템플릿 완성 → 경영상태점수 → 엑셀 동기화" 순서로 진행.
- 작업 중 formulas/agreements 설정 파일을 수정할 경우, 배포 전에 `npm run build` 및 `npm run dist:win`으로 아이콘 포함 여부도 다시 확인.
