# 실적관리 프로그램 설계 문서

## 📦 저장 구조 (SQLite 기반)

* **DB 파일:** `{userData}/data/app.db` (SQLite, WAL 모드)
* **첨부파일 폴더:** `{userData}/data/blobs/` (sha256 샤딩 구조)
* **서버:** 없음 (로컬 전용, Electron 앱 내부)

### 테이블 구조

#### record

| 필드           | 타입         | 설명                 |
| ------------ | ---------- | ------------------ |
| id           | TEXT (PK)  | UUID               |
| company      | TEXT       | 업체명                |
| trade_type   | TEXT       | 공종 (전기, 통신, 소방 등)  |
| title        | TEXT       | 공사명                |
| period_start | TEXT       | 시작일                |
| period_end   | TEXT       | 종료일                |
| amount       | INTEGER    | 계약금액               |
| tags         | TEXT(JSON) | 태그 (예: “지중”, “송전”) |
| notes        | TEXT       | 비고                 |
| created_at   | TEXT       | 생성일                |
| updated_at   | TEXT       | 수정일                |

#### attachment

| 필드         | 타입        | 설명           |
| ---------- | --------- | ------------ |
| id         | TEXT (PK) | UUID         |
| record_id  | TEXT (FK) | record.id 참조 |
| name       | TEXT      | 원본 파일명       |
| mime       | TEXT      | MIME 타입      |
| size       | INTEGER   | 파일 크기        |
| sha256     | TEXT      | 해시 (중복방지)    |
| blob_path  | TEXT      | 실제 파일 경로     |
| created_at | TEXT      | 첨부일          |

---

## 🧭 UI 구조 (통합형 화면)

### 전체 레이아웃

```
<Layout>
 ├── <Sidebar>       ← 공종 카테고리 목록
 │     ▶ 공동주택 (12)
 │     ▶ 의료 (8)
 │     ▶ 교육 (15)
 │     ▶ 철도 (5)
 │     ▶ 발전 (3)
 │     ▶ 기타 (2)
 │     ▶ 전기차 (4)
 │     ▶ 배전 (9)
 │     ▶ 송전 (6)
 │     ▶ 지중 (7)
 │
 ├── <Toolbar>       ← 검색창, 필터, 신규등록, 내보내기
 │     🔍 검색 | [필터] [＋실적등록] [내보내기]
 │
 └── <MainPanel>
       ├── 실적 리스트 테이블
       │     공사명 | 기간 | 금액 | 비고 | 실적증명서 보기
       └── <RecordDetailPanel>
             (우측 슬라이드)
             공사명 / 발주처 / 기간 / 금액 / 시공규모 / 첨부파일 목록
```

### 상단 툴바

* 검색(회사명, 공사명, 발주처 통합)
* 필터(년도, 금액, 태그, 공종)
* 신규 실적 등록(모달)
* 엑셀/PDF 내보내기

### 실적 테이블

* 최신순 정렬, Hover 강조
* 천단위 구분, 계약금액 오른쪽 정렬
* 경과일수 빨간색 강조
* 첨부파일 버튼: `파일 아이콘 + 보기`

### 상세 패널

* 공사명, 발주처, 기간, 금액, 시공규모
* 첨부파일 목록 (PDF 미리보기, 이미지 썸네일)
* [수정] [삭제] [닫기]

---

## 🎨 디자인 톤앤매너

| 항목    | 제안                             |
| ----- | ------------------------------ |
| 배경    | 흰색 (#ffffff) + 연한 회색 (#f9f9f9) |
| 포인트   | 파랑 (#007bff)                   |
| 폰트    | Pretendard 13~14px             |
| Hover | 연한 파랑 (#eaf2ff)                |
| 구분선   | 1px #ddd                       |
| 버튼    | Primary(파랑) + Outline(회색)      |

---

## 💾 공유 및 백업

* DB 및 blobs 폴더를 zip으로 압축하여 전달
* 팀원 간 데이터 공유 시 `app.db` 및 `blobs/` 폴더 동기화
* 동시 수정은 금지 (병합 기능으로 추후 대응)

---

## 🚀 개발 구조 요약

* **Electron main:** DB, 파일 I/O, 트랜잭션, IPC
* **Preload:** 안전한 브릿지 (`window.api`)
* **Renderer(React):** UI, 상태관리 (공종 선택, 검색, 실적 등록)

```
src/
 ├── main/           ← SQLite 핸들러, IPC 정의
 ├── preload/        ← window.api 정의
 ├── renderer/
 │     ├── components/
 │     │     ├── Sidebar
 │     │     ├── Toolbar
 │     │     ├── RecordList
 │     │     ├── RecordDetailPanel
 │     │     └── FileUploader
 │     ├── pages/App.jsx
 │     └── styles/
 └── assets/
       └── fonts/Pretendard
```

---

## ✅ 결론

* 홈화면은 따로 두지 않고 **한 화면 통합형 구조**로 구성
* 좌측 Sidebar가 공종/홈 역할을 겸함
* SQLite + 파일폴더 방식으로 완전한 로컬 독립형 구현 가능
* 향후 확장 시 대시보드 탭(통계, 그래프)을 별도 추가
